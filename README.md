# TTRPG Character Builder

Веб-сервис для создания и ведения листов персонажей для различных настольных ролевых игр.

Текущая цель — создание MVP (минимально жизнеспособного продукта) с поддержкой НРИ Daggerheart.

## Технологический стек

-   **Backend:** Python, Django, Django REST Framework
-   **База данных:** PostgreSQL
-   **Окружение:** Docker, Docker Compose

## Начало работы: развертывание проекта

Для развертывания проекта на локальной машине необходимо выполнить следующие шаги.

### 1. Пререквизиты

Перед началом убедитесь, что на вашей системе (Windows/macOS/Linux) установлены:

-   [Docker](https://www.docker.com/products/docker-desktop/)
-   [Git](https://git-scm.com/)

На Windows рекомендуется использовать Docker с бэкендом WSL 2 для лучшей производительности.

### 2. Клонирование репозитория

Откройте терминал и выполните команду для клонирования проекта:

```bash
git clone <URL_ВАШЕГО_РЕПОЗИТОРИЯ>
cd ttrpg-character-builder
```

### 3. Конфигурация переменных окружения

Проект использует переменные окружения для настройки. Вам необходимо создать файл `.env` на основе предоставленного шаблона.

1.  Скопируйте файл `.env.example`:
    ```bash
    cp .env.example .env
    ```
    *(На Windows, если команда `cp` не работает в `cmd`, используйте `copy .env.example .env` или выполните копирование через проводник).*

2.  Откройте созданный файл `.env` в текстовом редакторе. Значения по умолчанию подходят для локальной разработки. Вы можете изменить пароль для базы данных (`POSTGRES_PASSWORD`) и обязательно **сгенерируйте новый `SECRET_KEY`** для Django.

    Пример `.env` файла:
    ```dotenv
    # Настройки PostgreSQL
    POSTGRES_DB=ttrpg_char_builder
    POSTGRES_USER=builder
    POSTGRES_PASSWORD=supersecretpassword

    # Настройки Django
    SECRET_KEY=your-super-secret-django-key-replace-this-!@#$%^
    DEBUG=True
    ```

### 4. Сборка и запуск Docker-контейнеров

Находясь в корневой директории проекта, выполните команду для сборки образов и запуска всех сервисов (веб-сервер и база данных):

```bash
docker-compose up --build
```

-   Флаг `--build` необходим при первом запуске или после изменений в `Dockerfile` или `requirements.txt`.
-   В последующие разы для запуска проекта достаточно будет команды `docker-compose up`.
-   Этот терминал будет выводить логи работы сервисов. Оставьте его открытым.

### 5. Применение миграций и создание суперпользователя

Теперь необходимо подготовить базу данных и создать аккаунт администратора.

1.  **Откройте новый терминал** (не закрывая предыдущий).

2.  Выполните команду для применения миграций. Она создаст все необходимые таблицы в базе данных:
    ```bash
    docker-compose exec web python manage.py migrate
    ```

3.  Создайте суперпользователя для доступа к админ-панели Django:
    ```bash
    docker-compose exec web python manage.py createsuperuser
    ```
    Следуйте инструкциям в терминале, чтобы задать имя пользователя, email и пароль.

### 6. Проверка работоспособности

Если все шаги выполнены успешно, проект готов к работе:

-   **Веб-сервер Django** доступен по адресу: [http://localhost:8000/](http://localhost:8000/)
-   **Админ-панель Django** доступна по адресу: [http://localhost:8000/admin/](http://localhost:8000/admin/)

Войдите в админ-панель, используя данные суперпользователя, которые вы создали на предыдущем шаге. Вы должны увидеть разделы `CORE` и `CHARACTERS` для управления моделями проекта.

## Основные команды для разработки

Все команды выполняются из корневой директории проекта.

-   **Запустить проект:**
    ```bash
    docker-compose up
    ```
-   **Остановить проект:**
    -   Нажмите `Ctrl+C` в терминале, где запущен `docker-compose up`.
    -   Для полной остановки и удаления контейнеров (но не данных БД) выполните:
        ```bash
        docker-compose down
        ```
-   **Выполнить команду внутри контейнера `web`:**
    ```bash
    docker-compose exec web <ваша_команда>
    # Например:
    # docker-compose exec web python manage.py shell
    ```
-   **Создать миграции после изменения моделей:**
    ```bash
    docker-compose exec web python manage.py makemigrations
    ```
-   **Применить миграции:**
    ```bash
    docker-compose exec web python manage.py migrate
    ```
